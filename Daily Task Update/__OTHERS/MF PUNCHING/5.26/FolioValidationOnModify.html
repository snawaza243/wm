<script type="text/javascript">
    function validateModify() {
        const transactionType = document.getElementById('<%= transactionType.ClientID %>').value;
        const sipStpType = document.getElementById('<%= ddlSipStp.ClientID %>').value;
        const folio1 = document.getElementById('<%= folioNoo.ClientID %>').value.trim();
        const folio2 = document.getElementById('<%= TextBox2.ClientID %>').value.trim();
        const folio3 = document.getElementById('<%= switchSchemeName.ClientID %>').value.trim();

        // Case I: SWITCH
        if (transactionType === "SWITCH IN" && sipStpType === "REGULAR") {
            if (!folio1 || !folio2) {
                alert("Folio 1 and Folio 2 are required for SWITCH case.");
                return false;
            }
            if (folio1 !== folio2) {
                alert("Folio 1 and Folio 2 must be the same for SWITCH.");
                return false;
            }
        }

        // Case II: STP
        else if (transactionType === "PURCHASE" && sipStpType === "STP") {
            if (!folio1 || !folio2 || !folio3) {
                alert("Folio 1, 2, and 3 are required for STP.");
                return false;
            }
            if (folio1 !== folio3) {
                alert("Folio 1 and Folio 3 must be the same for STP.");
                return false;
            }
        }

        // Case III: SIP
        else if (transactionType === "PURCHASE" && sipStpType === "SIP") {
            // Folios are optional, but if filled must be valid (can optionally validate format)
            // So nothing to do here unless specific format checks needed
        }

        // Case IV: Additional
        else if (transactionType === "PURCHASE" && sipStpType === "REGULAR") {
            if (!folio1) {
                alert("Folio 1 is required for additional PURCHASE.");
                return false;
            }
        }

        // If all validations pass
        return confirm("Folio. Are you sure!");
    }
</script>
