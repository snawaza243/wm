CREATE OR REPLACE PROCEDURE WEALTHMAKER.PSM_LOG_AMC_MASTER (
P_FOR           IN VARCHAR2,
P_BY            IN VARCHAR2,
P_BY_VALUE      IN VARCHAR2,
P_LOG_ID        IN VARCHAR2,
P_ROLE_ID       IN VARCHAR2,
P_CURSOR         OUT SYS_REFCURSOR   
)
AS
BEGIN   
    IF P_FOR = 'MF_AR_MANUAL_RECO' THEN  
        IF P_BY IS NOT NULL THEN
            IF P_BY = 'CHANNEL' THEN
                OPEN P_CURSOR FOR                    
                    SELECT MUT_NAME , MUT_CODE
                    FROM MUT_FUND       
                    WHERE MUT_CODE IS NOT NULL
                    ORDER BY MUT_NAME;
            END IF;
        ELSE
            OPEN P_CURSOR FOR 
                SELECT MUT_NAME , MUT_CODE
                FROM MUT_FUND       
                WHERE MUT_CODE IS NOT NULL
                ORDER BY MUT_NAME;
        END IF;
    ELSE
        OPEN P_CURSOR FOR 
            SELECT MUT_NAME , MUT_CODE
            FROM MUT_FUND       
            WHERE MUT_CODE IS NOT NULL    
            --AND BM.BRANCH_CODE IN (SELECT BRANCH_ID FROM USERDETAILS_JI WHERE LOGIN_ID = P_LOG_ID AND ROLE_ID=P_ROLE_ID)
            ORDER BY MUT_NAME;
    END IF;        
END;