CREATE OR REPLACE PROCEDURE PSM_MF_ADD_VALIDATION1 (
    P_DT                IN  VARCHAR2,
    P_INSTALLMENT_TYPE  IN VARCHAR2,
    P_PAND1ADD          IN VARCHAR2,
    
    
    
    P_LOG               IN  VARCHAR2,
    P_ROLE              IN  VARCHAR2,
    P_CURSOR    OUT SYS_REFCURSOR
) AS
    V_RETURN CLOB := NULL;
BEGIN
  
    
    IF P_ROLE <> '212' THEN        
        OPEN P_CURSOR FOR SELECT 'ERROR: YOU ARE NOT AUTHORIZED TO PUNCH THE TRANSACTION' AS MESSAGE FROM DUAL;
        RETURN;
    END IF;
    
    IF P_DT IS NULL THEN
        V_RETURN := V_RETURN ||  ' DT IS REQUIRED ';
    END IF;

    IF V_RETURN IS NOT NULL THEN
        OPEN P_CURSOR FOR SELECT 'ERROR: ' || V_RETURN AS MESSAGE FROM DUAL;
        RETURN;
    ELSE 
        OPEN P_CURSOR FOR SELECT 'SUCCESS: MF PUNCHING TRANSACTION VALIDATION PASS ' AS MESSAGE FROM DUAL;
        RETURN;
    END IF;

EXCEPTION
    WHEN OTHERS THEN
        V_RETURN := 'Unhandled Exception: ' || SQLERRM;
        OPEN P_CURSOR FOR SELECT 'ERROR: ' || V_RETURN AS MESSAGE FROM DUAL;
END;
