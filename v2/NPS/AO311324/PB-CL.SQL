create or replace PROCEDURE PSM_AO_GET_CLIENTLIST (
    P_BRANCH_ID     IN VARCHAR2,
    P_MOBILE        IN VARCHAR2,
    P_CITY_ID       IN VARCHAR2,
    P_PHONE         IN VARCHAR2,
    P_CLIENT_CODE   IN VARCHAR2,
    P_BUSINESS_CD   IN VARCHAR2,
    P_CLIENT_NAME   IN VARCHAR2,
    P_CLIENT_LIST   OUT SYS_REFCURSOR
) AS
BEGIN
    OPEN P_CLIENT_LIST FOR
    SELECT *
    FROM CLIENT_TEST
    WHERE 
        (P_BRANCH_ID IS NULL OR UPPER(BRANCH_CODE) LIKE '%' || UPPER(P_BRANCH_ID) || '%')
        AND (P_MOBILE IS NULL OR UPPER(MOBILE_NO) LIKE '%' || UPPER(P_MOBILE) || '%')
        AND (P_CITY_ID IS NULL OR UPPER(CITY_ID) LIKE '%' || UPPER(P_CITY_ID) || '%')
        AND (P_PHONE IS NULL OR UPPER(TEL2) LIKE '%' || UPPER(P_PHONE) || '%')
        AND (P_CLIENT_CODE IS NULL OR UPPER(CLIENT_CODE) LIKE '%' || UPPER(P_CLIENT_CODE) || '%')
        AND (P_BUSINESS_CD IS NULL OR UPPER(CLIENT_PAN) LIKE '%' || UPPER(P_BUSINESS_CD) || '%')
        AND (P_CLIENT_NAME IS NULL OR UPPER(CLIENT_NAME) LIKE '%' || UPPER(P_CLIENT_NAME) || '%')
        AND UPPER(CLIENT_CODE) = UPPER(MAIN_CODE)
        AND ROWNUM < 200
    ORDER BY UPPER(CLIENT_NAME);
END;